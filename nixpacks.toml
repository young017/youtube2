[phases.setup]
nixPkgs = ["python311", "git", "git-lfs"]

# Hugging Face에서 모델 다운로드 (의존성 설치 후)
# Nixpacks는 requirements.txt를 자동으로 감지하고 설치합니다
[phases.install]
cmds = [
  "echo '=== Checking for model files ==='",
  "pwd",
  "ls -la | head -10",
  "echo '=== Checking model directory ==='",
  "ls -la 모델/ 2>/dev/null | head -10 || echo 'Model directory not found'",
  "find . -name '*.pkl' -o -name '*.cbm' 2>/dev/null | head -10 || echo 'No model files found'",
  "ls -la tags/tag_recommendation_model.pkl 2>/dev/null || echo 'Tag model file not found'",
  "echo '=== If models are missing, they will be downloaded from Hugging Face on server startup ==='"
]

