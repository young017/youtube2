<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›”ë³„ íŠ¸ë Œë“œ ë¶„ì„ - YouTube Data Analytics</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Chart.js (ì†ŒìŠ¤ë§µ ê²½ê³  ë°©ì§€ë¥¼ ìœ„í•´ ì†ŒìŠ¤ë§µ ë¹„í™œì„±í™”) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
        // Chart.js ì†ŒìŠ¤ë§µ ê²½ê³  ë°©ì§€
        if (typeof window !== 'undefined') {
            window.chartJsSourceMapWarning = false;
        }
    </script>
    
    <style>
        :root {
            --primary-color: #ff0000;
            --secondary-color: #1a1a1a;
            --accent-color: #ff3333;
            --text-dark: #ffffff;
            --text-light: #cccccc;
            --bg-light: #0a0a0a;
            --bg-dark: #000000;
        }
        
        body {
            background-color: #000000;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ffffff;
        }
        
        .hero-section {
            background-color: #000000;
            color: #ffffff;
            padding: 100px 0;
            border-bottom: 3px solid #ff0000;
        }
        
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(220, 53, 69, 0.3);
        }
        
        .feature-icon {
            font-size: 3rem;
            color: #ff0000;
            margin-bottom: 1rem;
        }
        
        .footer {
            background-color: #000000;
            color: #ffffff;
            padding: 50px 0 20px;
            border-top: 3px solid #ff0000;
        }
        
        .navbar {
            background-color: rgba(0, 0, 0, 0.95) !important;
            border-bottom: 2px solid #ff0000;
            backdrop-filter: blur(10px);
        }
        
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
            color: #ff0000 !important;
        }
        
        .nav-link {
            color: #ffffff !important;
            font-weight: 500;
        }
        
        .nav-link:hover {
            color: #ff0000 !important;
        }
        
        .navbar-toggler {
            border-color: rgba(255, 0, 0, 0.5);
        }
        
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 0, 0, 1)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        
        .btn-custom {
            background-color: #ff0000;
            border: 2px solid #ff0000;
            color: #ffffff;
            padding: 12px 30px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .btn-custom:hover {
            background-color: transparent;
            color: #ff0000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.5);
        }
        
        .trend-card {
            background-color: #1a1a1a;
            border: 2px solid #ff0000;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
            color: #ffffff;
        }
        
        .month-header {
            background-color: #ff0000;
            color: #ffffff;
            padding: 20px;
            border-radius: 0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .topic-item {
            background-color: #1a1a1a;
            border-left: 4px solid #ff0000;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0;
            transition: all 0.3s ease;
            color: #ffffff;
        }
        
        .topic-item:hover {
            background-color: #ff0000;
            color: #ffffff;
            transform: translateX(5px);
        }
        
        .topic-rank {
            background-color: #ff0000;
            color: #ffffff;
            width: 30px;
            height: 30px;
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .chart-container {
            background-color: #1a1a1a;
            border: 2px solid #ff0000;
            border-radius: 0;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: #1a1a1a;
            border: 2px solid #ff0000;
            padding: 25px;
            border-radius: 0;
            text-align: center;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
            transition: transform 0.3s ease;
            color: #ffffff;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            background-color: #ff0000;
            color: #ffffff;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff0000;
            margin-bottom: 10px;
        }
        
        .stat-card:hover .stat-number {
            color: #ffffff;
        }
        
        .stat-label {
            color: #cccccc;
            font-weight: 500;
        }
        
        .stat-card:hover .stat-label {
            color: #ffffff;
        }
        
        .rank-number {
            width: 40px;
            height: 40px;
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #ffffff;
            margin-right: 15px;
            font-size: 1.2rem;
        }
        
        .rank-1 { background-color: #ff0000; }
        .rank-2 { background-color: #ff0000; }
        .rank-3 { background-color: #ff0000; }
        .rank-4 { background-color: #ff0000; }
        .rank-5 { background-color: #ff0000; }
        
        .rank-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #ffffff;
        }
        
        .table-dark th {
            background-color: #ff0000;
            color: #ffffff;
            border-color: #ff0000;
        }
        
        .table-dark td {
            border-color: #ff0000;
        }
        
        .bg-primary { background-color: #ff0000 !important; }
        .bg-success { background-color: #ff0000 !important; }
        .bg-warning { background-color: #ff0000 !important; }
        .bg-info { background-color: #ff0000 !important; }
        .bg-secondary { background-color: #ff0000 !important; }
        
        .progress-bar {
            background-color: #ff0000;
        }
        
        .alert-success {
            background-color: #ff0000;
            border-color: #ff0000;
            color: #ffffff;
        }
        
        .alert-warning {
            background-color: #000000;
            border-color: #ff0000;
            color: #ffffff;
        }
        
        .monthly-trend-panel {
            background-color: #ff0000;
            border-radius: 15px;
            padding: 30px;
            height: 100%;
            color: #ffffff;
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }
        
        .monthly-trend-panel:hover {
            transform: translateY(-5px);
        }
        
        .panel-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .panel-header h4 {
            color: #ffffff;
            font-weight: bold;
            margin: 0;
            font-size: 1.5rem;
        }
        
        .trend-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .trend-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .trend-item:last-child {
            border-bottom: none;
        }
        
        .trend-rank {
            color: #ffffff;
            font-weight: bold;
            margin-right: 15px;
            min-width: 25px;
        }
        
        .trend-category {
            color: #ffffff;
            flex-grow: 1;
            font-size: 0.95rem;
        }
        
        .trend-count {
            color: #ffffff;
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .trend-more {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .trend-ranking-container {
            background-color: #1a1a1a;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
            margin-bottom: 30px;
            border: 1px solid rgba(255, 0, 0, 0.3);
        }
        
        .tab-navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #f8f9fa;
            padding-bottom: 20px;
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-btn.active {
            background-color: #ff0000;
            color: #ffffff;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.5);
        }
        
        .tab-btn:hover:not(.active) {
            background-color: #1a1a1a;
            color: #ff0000;
            border: 1px solid rgba(255, 0, 0, 0.3);
        }
        
        .tab-navigation {
            border-bottom: 2px solid rgba(255, 0, 0, 0.3);
        }
        
        .tab-content {
            position: relative;
        }
        
        .tab-panel {
            display: none;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        .ranking-cards {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px 0;
        }
        
        .ranking-card {
            flex: 1;
            min-width: 200px;
            background-color: #1a1a1a;
            border: 2px solid rgba(255, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .ranking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 0, 0, 0.4);
            border-color: #ff0000;
        }
        
        .rank-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ff0000;
            color: #ffffff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(255, 0, 0, 0.5);
        }
        
        .ranking-card.rank-1 .rank-badge {
            background-color: #ffd700;
            color: #000000;
        }
        
        .ranking-card.rank-2 .rank-badge {
            background-color: #c0c0c0;
            color: #000000;
        }
        
        .ranking-card.rank-3 .rank-badge {
            background-color: #cd7f32;
            color: #ffffff;
        }
        
        .card-icon {
            font-size: 3rem;
            margin: 20px 0 15px 0;
        }
        
        .card-info h5 {
            color: #ffffff;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .card-info p {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .card-count {
            background-color: #ff0000;
            color: #ffffff;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: inline-block;
        }
        
        .more-button-container {
            text-align: center;
            margin-top: 30px;
        }
        
        .more-btn {
            background-color: transparent;
            border: 2px solid #ff0000;
            color: #ff0000;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .more-btn:hover {
            background-color: #ff0000;
            color: #ffffff;
            border-color: #ff0000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.5);
        }
        
        .back-btn {
            background-color: #ff0000;
            border: 2px solid #ff0000;
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 0;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background-color: transparent;
            color: #ff0000;
            transform: translateY(-2px);
        }
        
        .display-4 {
            color: #ffffff;
        }
        
        .lead {
            color: #cccccc;
        }
        
        .tab-btn {
            color: #cccccc;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-graph-up me-2"></i>
                1ë“± ìœ íŠœë²„ ë˜ê¸°
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">í™ˆ</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#features">ì£¼ìš” ê¸°ëŠ¥</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#how-it-works">ì‚¬ìš© ë°©ë²•</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#key-features">í•µì‹¬ íŠ¹ì§•</a></li>
                    <li class="nav-item"><a class="nav-link active" href="trend.html">íŠ¸ë Œë“œ</a></li>
                    <li class="nav-item"><a class="nav-link" href="feedback.html">í”¼ë“œë°±</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" style="margin-top: 76px;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <a href="index.html" class="back-btn mb-4 d-inline-block">
                        <i class="bi bi-arrow-left me-2"></i>ë’¤ë¡œ ê°€ê¸°
                    </a>
                    <h1 class="display-4 fw-bold mb-4" style="font-size: 3rem;">ì›”ë³„ íŠ¸ë Œë“œ ë¶„ì„</h1>
                    <p class="lead mb-4" style="font-size: 1.25rem; font-weight: 400; line-height: 1.8;">ê° ì›”ë³„ë¡œ ì–´ë–¤ ì¹´í…Œê³ ë¦¬ê°€ ì¸ê¸°ì˜€ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                </div>
                <div class="col-lg-4 text-center">
                    <i class="bi bi-graph-up-arrow feature-icon"></i>
                </div>
            </div>
        </div>
    </section>

    <section style="margin-bottom: 50px;"></section>

    <!-- Main Content -->
    <div class="container" style="padding-bottom: 50px;">
        <!-- Monthly Trend Ranking -->
        <div class="trend-ranking-container">
            <!-- Tab Navigation -->
            <div class="tab-navigation" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="tab-btn active" data-month="january">1ì›”</button>
                    <button class="tab-btn" data-month="february">2ì›”</button>
                    <button class="tab-btn" data-month="march">3ì›”</button>
                    <button class="tab-btn" data-month="april">4ì›”</button>
                    <button class="tab-btn" data-month="may">5ì›”</button>
                    <button class="tab-btn" data-month="june">6ì›”</button>
                    <button class="tab-btn" data-month="july">7ì›”</button>
                    <button class="tab-btn" data-month="august">8ì›”</button>
                    <button class="tab-btn" data-month="september">9ì›”</button>
                    <button class="tab-btn" data-month="october">10ì›”</button>
                    <button class="tab-btn" data-month="november">11ì›”</button>
                    <button class="tab-btn" data-month="december">12ì›”</button>
                </div>
                <button class="btn btn-primary" id="updateTrendsBtn" onclick="updateTrends()" style="background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%); border: none; color: white; padding: 10px 20px; border-radius: 8px; font-weight: 600;">
                    <i class="bi bi-arrow-clockwise me-2"></i>íŠ¸ë Œë“œ ì—…ë°ì´íŠ¸
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content" id="tabContent">
                <!-- íƒ­ íŒ¨ë„ì€ JavaScriptë¡œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

        </div>
    
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Tab Functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // íƒ­ íŒ¨ë„ ì´ˆê¸°í™” (ì´ë¯¸ ì •ì˜ëœ í•¨ìˆ˜ í˜¸ì¶œ)
            if (typeof initializeMonthPanels === 'function') {
                initializeMonthPanels();
            }
            
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanels = document.querySelectorAll('.tab-panel');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetMonth = this.getAttribute('data-month');
                    
                    // Remove active class from all tabs and panels
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabPanels.forEach(p => p.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding panel
                    this.classList.add('active');
                    const targetPanel = document.getElementById(targetMonth);
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                    } else {
                        console.warn(`íƒ­ íŒ¨ë„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${targetMonth}`);
                    }
                });
            });
            
            // More button functionality
            const moreBtn = document.querySelector('.more-btn');
            moreBtn.addEventListener('click', function() {
                alert('ë” ë§ì€ ì›”ë³„ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ë³´ë ¤ë©´ êµ¬ë…í•˜ì„¸ìš”!');
            });
        });
        
        // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë§¤í•‘
        const categoryMap = {
            '1': 'Film & Animation',
            '2': 'Autos & Vehicles',
            '10': 'Music',
            '15': 'Pets & Animals',
            '17': 'Sports',
            '18': 'Short Movies',
            '19': 'Travel & Events',
            '20': 'Gaming',
            '21': 'Videoblogging',
            '22': 'People & Blogs',
            '23': 'Comedy',
            '24': 'Entertainment',
            '25': 'News & Politics',
            '26': 'Howto & Style'
        };
        
        // ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ ë§¤í•‘
        const categoryIcons = {
            '24': 'ğŸ¬',
            '10': 'ğŸµ',
            '22': 'ğŸ‘¥',
            '23': 'ğŸ˜„',
            '17': 'âš½',
            '19': 'âœˆï¸',
            '26': 'ğŸ’…',
            '20': 'ğŸ®',
            '1': 'ğŸï¸',
            '15': 'ğŸ¾'
        };
        
        // ì¹´í…Œê³ ë¦¬ í•œê¸€ ì´ë¦„ ë§¤í•‘
        const categoryNamesKo = {
            '24': 'ì—”í„°í…Œì¸ë¨¼íŠ¸',
            '10': 'ìŒì•…',
            '22': 'ì¸ë¬¼ ë° ë¸”ë¡œê·¸',
            '23': 'ì½”ë¯¸ë””',
            '17': 'ìŠ¤í¬ì¸ ',
            '19': 'ì—¬í–‰ ë° ì´ë²¤íŠ¸',
            '26': 'í•˜ìš°íˆ¬ ë° ìŠ¤íƒ€ì¼',
            '20': 'ê²Œì„',
            '1': 'ì˜í™” ë° ì• ë‹ˆë©”ì´ì…˜',
            '15': 'ë°˜ë ¤ë™ë¬¼ ë° ë™ë¬¼'
        };
        
        // íŠ¸ë Œë“œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì›”ë³„ ìˆœì°¨ ì²˜ë¦¬)
        async function updateTrends() {
            const updateBtn = document.getElementById('updateTrendsBtn');
            const originalText = updateBtn.innerHTML;
            
            try {
                // ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© í‘œì‹œ
                updateBtn.disabled = true;
                updateBtn.innerHTML = '<i class="bi bi-hourglass-split me-2"></i>ì—…ë°ì´íŠ¸ ì¤‘...';
                
                // API Base URL ì„¤ì • (Railway ë°°í¬ URL)
                const API_BASE = "https://youtube-production-ee6c.up.railway.app";
                
                // ì „ì²´ íŠ¸ë Œë“œ ê²°ê³¼ ì €ì¥
                const allTrends = {};
                
                // ì´ë¯¸ ìˆëŠ” ì›” ë°ì´í„° í™•ì¸ (localStorage ë˜ëŠ” í™”ë©´ì—ì„œ)
                const existingTrendData = JSON.parse(localStorage.getItem('trendData') || '{}');
                const existingMonths = Object.keys(existingTrendData).filter(key => 
                    key !== 'updated_at' && existingTrendData[key] && existingTrendData[key].length > 0
                );
                
                console.log(`ğŸ“Š ì´ë¯¸ ìˆëŠ” ì›” ë°ì´í„°: ${existingMonths.join(', ')}`);
                
                // localStorageì— ìˆëŠ” ë°ì´í„°ë¥¼ sessionStorageë¡œ ë³µì‚¬ (í™”ë©´ í‘œì‹œìš©)
                if (existingTrendData && Object.keys(existingTrendData).length > 0) {
                    // localStorageì˜ ë°ì´í„°ë¥¼ defaultTrendData í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                    const loadedTrendData = {};
                    for (const [monthKey, categoryIds] of Object.entries(existingTrendData)) {
                        if (monthKey === 'updated_at') continue;
                        if (Array.isArray(categoryIds) && categoryIds.length > 0) {
                            loadedTrendData[monthKey] = {
                                top5: categoryIds.map((categoryId, index) => ({
                                    rank: index + 1,
                                    category_id: String(categoryId),
                                    count: 0 // localStorageì—ëŠ” count ì •ë³´ê°€ ì—†ìœ¼ë¯€ë¡œ 0ìœ¼ë¡œ ì„¤ì •
                                }))
                            };
                        }
                    }
                    // ê¸°ì¡´ ë°ì´í„°ë¥¼ allTrendsì— ì¶”ê°€
                    Object.assign(allTrends, loadedTrendData);
                }
                
                // 1ì›”ë¶€í„° 12ì›”ê¹Œì§€ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ (ì—†ëŠ” ì›”ë§Œ)
                for (let month = 1; month <= 12; month++) {
                    const monthKey = `${month}ì›”`;
                    
                    // ì´ë¯¸ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ìŠ¤í‚µ
                    if (existingMonths.includes(monthKey)) {
                        console.log(`â­ï¸ ${monthKey}ëŠ” ì´ë¯¸ ë°ì´í„°ê°€ ìˆì–´ ìŠ¤í‚µí•©ë‹ˆë‹¤.`);
                        continue;
                    }
                    try {
                        // ë²„íŠ¼ì— í˜„ì¬ ì§„í–‰ ìƒí™© í‘œì‹œ
                        updateBtn.innerHTML = `<i class="bi bi-hourglass-split me-2"></i>${month}ì›” ë¶„ì„ ì¤‘...`;
                        
                        // ì›”ë³„ API í˜¸ì¶œ
                        const response = await fetch(`${API_BASE}/api/trends/update-month?month=${month}`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            }
                        });
                        
                        if (!response.ok) {
                            const errorData = await response.json().catch(() => ({}));
                            console.warn(`${month}ì›” ë¶„ì„ ì‹¤íŒ¨:`, errorData.detail || `HTTP ${response.status}`);
                            // í•´ë‹¹ ì›”ì´ ì—†ì–´ë„ ê³„ì† ì§„í–‰
                            continue;
                        }
                        
                        const data = await response.json();
                        
                        if (data.success && data.data && data.data.trends) {
                            // í•´ë‹¹ ì›”ì˜ íŠ¸ë Œë“œ ê²°ê³¼ë¥¼ ì „ì²´ ê²°ê³¼ì— ì¶”ê°€
                            Object.assign(allTrends, data.data.trends);
                            
                            // ì¦‰ì‹œ í™”ë©´ì— ì—…ë°ì´íŠ¸ (ë°ì´í„°ê°€ ì—†ì–´ë„ í‘œì‹œ)
                            updateTrendDisplay(data.data.trends);
                            
                            // localStorageì™€ sessionStorageì— ëª¨ë‘ ì €ì¥
                            updateCategoryRankStatus(data.data.trends);
                            // sessionStorageì—ë„ ì €ì¥ (í˜„ì¬ ì„¸ì…˜ì—ì„œë§Œ í™”ë©´ì— í‘œì‹œ)
                            sessionStorage.setItem('trendDisplayData', JSON.stringify(data.data.trends));
                            
                            // ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
                            const monthKey = `${month}ì›”`;
                            const monthTrend = data.data.trends[monthKey];
                            if (monthTrend && monthTrend.top5 && monthTrend.top5.length > 0) {
                                console.log(`âœ… ${month}ì›” ë¶„ì„ ì™„ë£Œ`);
                            } else {
                                console.log(`âš ï¸ ${month}ì›” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.`);
                            }
                        }
                    } catch (error) {
                        console.warn(`${month}ì›” ë¶„ì„ ì¤‘ ì˜¤ë¥˜:`, error.message);
                        // í•´ë‹¹ ì›” ì‹¤íŒ¨í•´ë„ ë‹¤ìŒ ì›” ê³„ì† ì§„í–‰
                    }
                }
                
                // ìµœì¢… ê²°ê³¼ë¥¼ localStorageì™€ sessionStorageì— ì €ì¥
                if (Object.keys(allTrends).length > 0) {
                    updateCategoryRankStatus(allTrends);
                    // sessionStorageì—ë„ ì €ì¥ (í˜„ì¬ ì„¸ì…˜ì—ì„œë§Œ í™”ë©´ì— í‘œì‹œ)
                    sessionStorage.setItem('trendDisplayData', JSON.stringify(allTrends));
                    alert(`âœ… íŠ¸ë Œë“œ ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
                } else {
                    alert('âš ï¸ ë¶„ì„ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('íŠ¸ë Œë“œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
                alert(`âŒ íŠ¸ë Œë“œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            } finally {
                // ë²„íŠ¼ ë³µì›
                updateBtn.disabled = false;
                updateBtn.innerHTML = originalText;
            }
        }
        
        // ì›”ë³„ ID ë§¤í•‘ (1~12ì›”)
        const monthMapping = {
            '1ì›”': 'january',
            '2ì›”': 'february',
            '3ì›”': 'march',
            '4ì›”': 'april',
            '5ì›”': 'may',
            '6ì›”': 'june',
            '7ì›”': 'july',
            '8ì›”': 'august',
            '9ì›”': 'september',
            '10ì›”': 'october',
            '11ì›”': 'november',
            '12ì›”': 'december'
        };
        
        // ê¸°ë³¸ íŠ¸ë Œë“œ ë°ì´í„° (ì‚¬ìš©ì ì œê³µ ë°ì´í„°)
        const defaultTrendData = {
            '1ì›”': {
                top5: [
                    { rank: 1, category_id: '24', count: 2029 },
                    { rank: 2, category_id: '22', count: 1910 },
                    { rank: 3, category_id: '23', count: 515 },
                    { rank: 4, category_id: '19', count: 418 },
                    { rank: 5, category_id: '10', count: 398 }
                ]
            },
            '2ì›”': {
                top5: [
                    { rank: 1, category_id: '24', count: 2048 },
                    { rank: 2, category_id: '22', count: 1665 },
                    { rank: 3, category_id: '26', count: 520 },
                    { rank: 4, category_id: '19', count: 468 },
                    { rank: 5, category_id: '10', count: 459 }
                ]
            },
            '3ì›”': {
                top5: [
                    { rank: 1, category_id: '22', count: 2065 },
                    { rank: 2, category_id: '24', count: 1739 },
                    { rank: 3, category_id: '23', count: 749 },
                    { rank: 4, category_id: '10', count: 635 },
                    { rank: 5, category_id: '26', count: 471 }
                ]
            },
            '4ì›”': {
                top5: [
                    { rank: 1, category_id: '22', count: 2134 },
                    { rank: 2, category_id: '24', count: 1952 },
                    { rank: 3, category_id: '10', count: 690 },
                    { rank: 4, category_id: '23', count: 603 },
                    { rank: 5, category_id: '26', count: 406 }
                ]
            },
            '5ì›”': {
                top5: [
                    { rank: 1, category_id: '24', count: 1951 },
                    { rank: 2, category_id: '22', count: 1931 },
                    { rank: 3, category_id: '10', count: 902 },
                    { rank: 4, category_id: '19', count: 501 },
                    { rank: 5, category_id: '23', count: 425 }
                ]
            },
            '6ì›”': {
                top5: [
                    { rank: 1, category_id: '22', count: 1755 },
                    { rank: 2, category_id: '24', count: 1419 },
                    { rank: 3, category_id: '10', count: 605 },
                    { rank: 4, category_id: '23', count: 513 },
                    { rank: 5, category_id: '26', count: 423 }
                ]
            },
            '7ì›”': {
                top5: [
                    { rank: 1, category_id: '24', count: 1315 },
                    { rank: 2, category_id: '10', count: 1125 },
                    { rank: 3, category_id: '22', count: 949 },
                    { rank: 4, category_id: '20', count: 318 },
                    { rank: 5, category_id: '26', count: 309 }
                ]
            },
            '8ì›”': {
                top5: [
                    { rank: 1, category_id: '10', count: 2041 },
                    { rank: 2, category_id: '20', count: 1081 },
                    { rank: 3, category_id: '24', count: 179 },
                    { rank: 4, category_id: '1', count: 131 },
                    { rank: 5, category_id: '22', count: 44 }
                ]
            },
            '9ì›”': {
                top5: [
                    { rank: 1, category_id: '10', count: 2157 },
                    { rank: 2, category_id: '20', count: 1043 },
                    { rank: 3, category_id: '24', count: 156 },
                    { rank: 4, category_id: '1', count: 85 },
                    { rank: 5, category_id: '22', count: 69 }
                ]
            },
            '10ì›”': {
                top5: [
                    { rank: 1, category_id: '10', count: 2206 },
                    { rank: 2, category_id: '20', count: 1000 },
                    { rank: 3, category_id: '24', count: 157 },
                    { rank: 4, category_id: '1', count: 103 },
                    { rank: 5, category_id: '22', count: 97 }
                ]
            }
        };
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ­ íŒ¨ë„ ìƒì„±
        function initializeMonthPanels() {
            const tabContent = document.getElementById('tabContent');
            if (!tabContent) return;
            
            const monthNames = [
                { key: '1ì›”', id: 'january' },
                { key: '2ì›”', id: 'february' },
                { key: '3ì›”', id: 'march' },
                { key: '4ì›”', id: 'april' },
                { key: '5ì›”', id: 'may' },
                { key: '6ì›”', id: 'june' },
                { key: '7ì›”', id: 'july' },
                { key: '8ì›”', id: 'august' },
                { key: '9ì›”', id: 'september' },
                { key: '10ì›”', id: 'october' },
                { key: '11ì›”', id: 'november' },
                { key: '12ì›”', id: 'december' }
            ];
            
            monthNames.forEach((month, index) => {
                const panel = document.createElement('div');
                panel.className = `tab-panel ${index === 3 ? 'active' : ''}`; // 4ì›”ì´ ê¸°ë³¸ active
                panel.id = month.id;
                panel.innerHTML = `
                    <div class="ranking-cards" style="display: flex; justify-content: center; align-items: center; min-height: 400px;">
                        <div style="text-align: center; padding: 40px; color: #cccccc;">
                            <i class="bi bi-hourglass-split" style="font-size: 3rem; margin-bottom: 20px; display: block;"></i>
                            <p>íŠ¸ë Œë“œ ì—…ë°ì´íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ${month.key} íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì„¸ìš”.</p>
                        </div>
                    </div>
                `;
                tabContent.appendChild(panel);
            });
            
            // sessionStorageì— ì €ì¥ëœ íŠ¸ë Œë“œ ë°ì´í„° í™•ì¸ (í˜„ì¬ ì„¸ì…˜ì—ì„œë§Œ í‘œì‹œ)
            let sessionTrendData = null;
            try {
                const storedSessionData = sessionStorage.getItem('trendDisplayData');
                if (storedSessionData) {
                    sessionTrendData = JSON.parse(storedSessionData);
                }
            } catch (e) {
                console.error('ì„¸ì…˜ íŠ¸ë Œë“œ ë°ì´í„° íŒŒì‹± ì‹¤íŒ¨:', e);
            }
            
            // sessionStorageì— ë°ì´í„°ê°€ ìˆìœ¼ë©´ í™”ë©´ì— í‘œì‹œ (ê°™ì€ ì„¸ì…˜ì—ì„œ ì—…ë°ì´íŠ¸í•œ ê²½ìš°)
            if (sessionTrendData && Object.keys(sessionTrendData).length > 0) {
                updateTrendDisplay(sessionTrendData);
                console.log('âœ… sessionStorageì—ì„œ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.');
            } else {
                // sessionStorageì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ë©”ì‹œì§€ë§Œ í‘œì‹œ (ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ ëŒì•„ì˜¨ ê²½ìš°)
                // localStorageì—ëŠ” ì €ì¥ë˜ì–´ ìˆì§€ë§Œ í™”ë©´ì—ëŠ” í‘œì‹œí•˜ì§€ ì•ŠìŒ
                console.log('â„¹ï¸ sessionStorageì— íŠ¸ë Œë“œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ì—…ë°ì´íŠ¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
            }
            
            // localStorageì—ë„ ê¸°ë³¸ ë°ì´í„° ì €ì¥ (feedback-result.htmlì—ì„œ ì‚¬ìš©)
            updateCategoryRankStatus(defaultTrendData);
        }
        
        // íŠ¸ë Œë“œ ê²°ê³¼ë¥¼ í™”ë©´ì— ë°˜ì˜í•˜ëŠ” í•¨ìˆ˜
        function updateTrendDisplay(trends) {
            
            for (const [monthKey, monthData] of Object.entries(trends)) {
                const monthId = monthMapping[monthKey];
                if (!monthId) continue;
                
                const panel = document.getElementById(monthId);
                if (!panel) continue;
                
                const rankingCards = panel.querySelector('.ranking-cards');
                if (!rankingCards) continue;
                
                // ê¸°ì¡´ ì¹´ë“œ ì œê±°
                rankingCards.innerHTML = '';
                
                // ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ë©”ì‹œì§€ í‘œì‹œ
                if (!monthData.top5 || monthData.top5.length === 0) {
                    rankingCards.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #cccccc; width: 100%;">
                            <i class="bi bi-hourglass-split" style="font-size: 3rem; margin-bottom: 20px; display: block; color: #ffa500;"></i>
                            <p style="font-size: 1.2rem; margin: 0;">${monthKey} ë°ì´í„°ëŠ” ì•„ì§ ì§‘ê³„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                        </div>
                    `;
                    continue;
                }
                
                // TOP 5 ì¹´í…Œê³ ë¦¬ í‘œì‹œ
                monthData.top5.forEach((item, index) => {
                    const categoryId = item.category_id;
                    const categoryName = categoryMap[categoryId] || 'ê¸°íƒ€';
                    const categoryNameKo = categoryNamesKo[categoryId] || categoryName;
                    const icon = categoryIcons[categoryId] || 'ğŸ“º';
                    const rank = index + 1;
                    
                    const rankClass = `rank-${rank}`;
                    const card = document.createElement('div');
                    card.className = `ranking-card ${rankClass}`;
                    card.innerHTML = `
                        <div class="rank-badge">${rank}ìœ„</div>
                        <div class="card-icon">${icon}</div>
                        <div class="card-info">
                            <h5>${categoryName}</h5>
                            <p>${categoryNameKo}</p>
                        </div>
                        <div class="card-count">${item.count}ê°œ</div>
                    `;
                    rankingCards.appendChild(card);
                });
            }
        }
        
        // feedback-result.htmlì˜ getCategoryRankStatus í•¨ìˆ˜ ì—…ë°ì´íŠ¸
        function updateCategoryRankStatus(trends) {
            // localStorageì— ì €ì¥í•˜ì—¬ feedback-result.htmlì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
            const trendData = {
                '1ì›”': trends['1ì›”']?.top5.map(item => item.category_id) || [],
                '2ì›”': trends['2ì›”']?.top5.map(item => item.category_id) || [],
                '3ì›”': trends['3ì›”']?.top5.map(item => item.category_id) || [],
                '4ì›”': trends['4ì›”']?.top5.map(item => item.category_id) || [],
                '5ì›”': trends['5ì›”']?.top5.map(item => item.category_id) || [],
                '6ì›”': trends['6ì›”']?.top5.map(item => item.category_id) || [],
                '7ì›”': trends['7ì›”']?.top5.map(item => item.category_id) || [],
                '8ì›”': trends['8ì›”']?.top5.map(item => item.category_id) || [],
                '9ì›”': trends['9ì›”']?.top5.map(item => item.category_id) || [],
                '10ì›”': trends['10ì›”']?.top5.map(item => item.category_id) || [],
                '11ì›”': trends['11ì›”']?.top5.map(item => item.category_id) || [],
                '12ì›”': trends['12ì›”']?.top5.map(item => item.category_id) || [],
                updated_at: new Date().toISOString()
            };
            
            localStorage.setItem('trendData', JSON.stringify(trendData));
            console.log('âœ… íŠ¸ë Œë“œ ë°ì´í„°ê°€ localStorageì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤:', trendData);
        }
    </script>
</body>
</html>
